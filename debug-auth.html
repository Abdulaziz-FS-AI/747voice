<!DOCTYPE html>
<html>
<head>
    <title>Voice Matrix - Auth Debug</title>
    <style>
        body {
            font-family: system-ui;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #0f0f14;
            color: #e4e4e7;
        }
        .debug-box {
            background: #18181b;
            border: 1px solid #27272a;
            border-radius: 8px;
            padding: 16px;
            margin: 16px 0;
        }
        .error { color: #ef4444; }
        .success { color: #22c55e; }
        .warning { color: #f59e0b; }
        button {
            background: #8b5cf6;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            margin: 8px;
        }
        button:hover { background: #7c3aed; }
        pre { background: #09090b; padding: 12px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>üîß Voice Matrix Auth Debug</h1>
    
    <div class="debug-box">
        <h2>Quick Diagnosis</h2>
        <div id="diagnosis">Running checks...</div>
    </div>

    <div class="debug-box">
        <h2>üöÄ Immediate Access</h2>
        <p>Skip authentication issues and access the demo directly:</p>
        <button onclick="window.open('/demo-login', '_self')">
            üöÄ Enter Demo Mode (No Auth Required)
        </button>
        <button onclick="window.open('/dashboard', '_self')">
            üìä Try Dashboard Direct Access
        </button>
    </div>

    <div class="debug-box">
        <h2>OAuth Debug Test</h2>
        <button onclick="testGoogleAuth()">Test Google OAuth</button>
        <button onclick="testSupabase()">Test Supabase Connection</button>
        <div id="test-results"></div>
    </div>

    <div class="debug-box">
        <h2>System Information</h2>
        <pre id="system-info"></pre>
    </div>

    <script>
        // System diagnosis
        function runDiagnosis() {
            const diagnosis = document.getElementById('diagnosis');
            const checks = [];
            
            // Check browser
            checks.push(`‚úÖ Browser: ${navigator.userAgent.split(' ').pop()}`);
            
            // Check URL
            checks.push(`‚úÖ Current URL: ${window.location.href}`);
            
            // Check extensions (basic)
            if (navigator.plugins.length === 0) {
                checks.push(`‚ö†Ô∏è  Potential ad blocker detected (no plugins)`);
            } else {
                checks.push(`‚úÖ Browser plugins detected: ${navigator.plugins.length}`);
            }
            
            // Check local storage
            try {
                localStorage.setItem('test', 'test');
                localStorage.removeItem('test');
                checks.push(`‚úÖ Local storage working`);
            } catch (e) {
                checks.push(`‚ùå Local storage blocked: ${e.message}`);
            }
            
            diagnosis.innerHTML = checks.join('<br>');
        }
        
        // Test Google OAuth
        async function testGoogleAuth() {
            const results = document.getElementById('test-results');
            results.innerHTML = 'üîÑ Testing Google OAuth...';
            
            try {
                // Try to reach Google OAuth
                const response = await fetch('https://accounts.google.com/.well-known/openid_configuration');
                if (response.ok) {
                    results.innerHTML += '<br>‚úÖ Google OAuth endpoints reachable';
                } else {
                    results.innerHTML += '<br>‚ùå Google OAuth endpoints not reachable';
                }
            } catch (error) {
                results.innerHTML += `<br>‚ùå Network error: ${error.message}`;
            }
        }
        
        // Test Supabase connection
        async function testSupabase() {
            const results = document.getElementById('test-results');
            results.innerHTML += '<br>üîÑ Testing Supabase...';
            
            try {
                const response = await fetch('https://mpnfinwlvxjdnxikeicb.supabase.co/rest/v1/', {
                    headers: {
                        'apikey': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1wbmZpbndsdnhqZG54aWtlaWNiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM3NjE3NjYsImV4cCI6MjA2OTMzNzc2Nn0.gTL9ZVBCp12OGAi0vNTNlneAgh9flaAulWde5lzsws0'
                    }
                });
                if (response.ok) {
                    results.innerHTML += '<br>‚úÖ Supabase connection working';
                } else {
                    results.innerHTML += `<br>‚ùå Supabase error: ${response.status}`;
                }
            } catch (error) {
                results.innerHTML += `<br>‚ùå Supabase connection failed: ${error.message}`;
            }
        }
        
        // Show system info
        function showSystemInfo() {
            const info = {
                userAgent: navigator.userAgent,
                language: navigator.language,
                cookieEnabled: navigator.cookieEnabled,
                javaEnabled: navigator.javaEnabled(),
                onLine: navigator.onLine,
                platform: navigator.platform,
                url: window.location.href,
                referrer: document.referrer,
                timestamp: new Date().toISOString()
            };
            
            document.getElementById('system-info').textContent = JSON.stringify(info, null, 2);
        }
        
        // Run diagnostics on load
        runDiagnosis();
        showSystemInfo();
    </script>
</body>
</html>